#include QMK_KEYBOARD_H
#include "windowdump.h"

#define LAYOUT_wrapper(...) LAYOUT(__VA_ARGS__)

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [_QWERTY] = LAYOUT_wrapper(
    _________________QWERTY_L1_________________,  KC_MPLY,  _________________QWERTY_R1_________________,
    _________________QWERTY_L2_________________,            _________________QWERTY_R2_________________,
    _________________QWERTY_L3_________________,            _________________QWERTY_R3_________________,
                               KC_LOWR, KC_NMBS,            KC_NVSP, KC_RASE
  ),

  [_QWERTY_MODS] = LAYOUT_wrapper(
    ___________________BLANK___________________,  _______,  ___________________BLANK___________________,
    ____________QWERTY_L2_NO_HR_MODS___________,            ____________QWERTY_R2_NO_HR_MODS___________,
    ___________________BLANK___________________,            ___________________BLANK___________________,
                               _______, _______,            _______, _______
  ),

  [_COLEMAK] = LAYOUT_wrapper(
    ______________COLEMAK_MOD_DH_L1____________,  _______,  ______________COLEMAK_MOD_DH_R1____________,
    ______________COLEMAK_MOD_DH_L2____________,            ______________COLEMAK_MOD_DH_R2____________,
    ______________COLEMAK_MOD_DH_L3____________,            ______________COLEMAK_MOD_DH_R3____________,
                               _______, _______,            _______, _______
  ),

  [_COLEMAK_MODS] = LAYOUT_wrapper(
    ___________________BLANK___________________,  _______,  ___________________BLANK___________________,
    ________COLEMAK_MOD_DH_L2_NO_HR_MODS_______,            ________COLEMAK_MOD_DH_R2_NO_HR_MODS_______,
    ___________________BLANK___________________,            ___________________BLANK___________________,
                               _______, _______,            _______, _______
  ),

  [_HANDSDOWN] = LAYOUT_wrapper(
    ______________HANDS_DOWN_ALT_L1____________,  _______,  ______________HANDS_DOWN_ALT_R1____________,
    ______________HANDS_DOWN_ALT_L2____________,            ______________HANDS_DOWN_ALT_R2____________,
    ______________HANDS_DOWN_ALT_L3____________,            ______________HANDS_DOWN_ALT_R3____________,
                               _______, _______,            _______, _______
  ),

  [_HANDSDOWN_MODS] = LAYOUT_wrapper(
    ___________________BLANK___________________,  _______,  ___________________BLANK___________________,
    ________HANDS_DOWN_ALT_L2_NO_HR_MODS_______,            ________HANDS_DOWN_ALT_R2_NO_HR_MODS_______,
    ___________________BLANK___________________,            ___________________BLANK___________________,
                               _______, _______,            _______, _______
  ),

  [_GAMER] = LAYOUT_wrapper(
    ___________________BLANK___________________,  KC_ESC,   ___________________BLANK___________________,
    ____________QWERTY_L2_NO_HR_MODS___________,            ___________________BLANK___________________,
    ___________________BLANK___________________,            ___________________BLANK___________________,
                               KC_GLWR, KC_BSPC,            _______, _______
  ),

  [_GAMER2] = LAYOUT_wrapper(
    ___________________BLANK___________________,  KC_ESC,   ___________________BLANK___________________,
    ___________________BLANK___________________,            ___________________BLANK___________________,
    ___________________BLANK___________________,            ___________________BLANK___________________,
                               KC_GLWR, KC_SPC,             KC_NVBS, _______
  ),

  [_TOUHOU] = LAYOUT_wrapper(
    KC_ESC,  _______, _______, _______, _______,  _______,  _______, _______, KC_UP,   _______, _______,
    ________________TOUHOU_LEFT________________,            ________________TOUHOU_RIGHT_______________,
    ___________________BLANK___________________,            ___________________BLANK___________________,
                               _______, _______,            _______, _______
  ),

  [_NUMBERS] = LAYOUT_wrapper(
    _______________SYMBOLS_LEFT________________,  _______,  _______________SYMBOLS_RIGHT_______________,
    ________________NUMBER_LEFT________________,            ________________NUMBER_RIGHT_______________,
    _________________FUNC_LEFT_________________,            _________________FUNC_RIGHT________________,
                               _______, V_V_V_V,            KC_F11,  KC_F12
  ),

  [_NAV] = LAYOUT_wrapper(
    __________________NAV_L1___________________,  _______,  __________________NAV_R1___________________,
    __________________NAV_L2___________________,            __________________NAV_R2___________________,
    __________________NAV_L3___________________,            __________________NAV_R3___________________,
                               _______, _______,            V_V_V_V, _______
  ),

  [_GLOWER] = LAYOUT_wrapper(
    ________________NUMBER_RIGHT_______________,  _______,  _________________LOWER_R1__________________,
    ________________NUMBER_LEFT________________,            _________________LOWER_R2__________________,
    _________________FUNC_LEFT_________________,            _________________FUNC_RIGHT________________,
                               V_V_V_V, _______,            KC_F11, KC_ADJS
  ),

  [_LOWER] = LAYOUT_wrapper(
    _________________LOWER_L1__________________,  _______,  _________________LOWER_R1__________________,
    _________________LOWER_L2__________________,            _________________LOWER_R2__________________,
    _________________LOWER_L3__________________,            _________________LOWER_R3__________________,
                               V_V_V_V, _______,            KC_DEL,  KC_ADJS
  ),

  [_RAISE] = LAYOUT_wrapper(
    _________________RAISE_L1__________________,  KC_PSCR,  _________________RAISE_R1__________________,
    _________________RAISE_L2__________________,            _________________RAISE_R2__________________,
    _________________RAISE_L3__________________,            _________________RAISE_R3__________________,
                               KC_ADJS, KC_DEL,             _______, V_V_V_V
  ),

  [_ADJUST] = LAYOUT_wrapper(
    _________________ADJUST_L1_________________,  _______,  _________________ADJUST_R1_________________,
    _________________ADJUST_L2_________________,            _________________ADJUST_R2_________________,
    _________________ADJUST_L3_________________,            _________________ADJUST_R3_________________,
                               V_V_V_V, _______,            _______, V_V_V_V
  ),
};

void encoder_update_user(uint8_t index, bool clockwise) {
    if (index == 0) {
        if (clockwise) {
            tap_code(KC_VOLU);
        } else {
            tap_code(KC_VOLD);
        }
    }
}

#ifdef OLED_DRIVER_ENABLE
oled_rotation_t oled_init_user(oled_rotation_t rotation) {
    return OLED_ROTATION_90;  // rotates for proper orientation
}

void oled_task_user(void) {
    oled_render_layer_state();
}
#endif
